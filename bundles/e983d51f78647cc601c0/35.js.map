{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/EditionButtons.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useInitialContent.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/EditWysiwygComposer.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useWysiwygEditActionHandler.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useEditing.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/createMessageContent.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/message.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/isContentModified.ts"],"names":["EditionButtons","onCancelClick","onSaveClick","isSaveDisabled","className","AccessibleButton","kind","onClick","_t","disabled","useInitialContent","editorStateTransfer","roomContext","useRoomContext","mxClient","useMatrixClientContext","useMemo","room","partCreator","CommandPartCreator","parts","hasEditorState","getSerializedParts","map","p","deserializePart","getEvent","getContent","format","formatted_body","replace","getFormattedContent","parseEvent","shouldEscape","SettingsStore","getValue","reduce","content","part","text","parseEditorStateTransfer","Content","forwardRef","composerFunctions","composerElement","composerContext","useComposerContext","timeoutId","useRef","handler","useCallback","payload","current","context","TimelineRenderingType","Room","action","Action","FocusEditMessageComposer","focusComposer","ComposerInsert","timelineRenderingType","composerType","ComposerType","Edit","setSelection","selection","then","insertText","useDispatcher","defaultDispatcher","useWysiwygEditActionHandler","EditWysiwygComposer","props","defaultContextValue","getDefaultContextValue","initialContent","isReady","undefined","editMessage","endEditing","onChange","setIsSaveDisabled","useState","setContent","_content","_isSaveDisabled","useEditing","ComposerContext","Provider","value","WysiwygComposer","classNames","onSend","ref","async","createMessageContent","message","isHTML","relation","replyToEvent","permalinkCreator","includeReplyLegacyFallback","editedEvent","isEditing","Boolean","isReply","replyEventId","isReplyAndEditing","body","richToPlain","bodyPrefix","mxEvent","lines","split","l","trim","length","startsWith","getTextReplyFallback","formattedBodyPrefix","html","mxReply","DOMParser","parseFromString","querySelector","outerHTML","getHtmlReplyFallback","msgtype","MsgType","Text","isMarkdownEnabled","formattedBody","plainToRich","attachRelation","rel_type","event_id","getId","addReplyToMessageContent","includeLegacyFallback","sendMessage","params","roomId","posthogEvent","eventName","inThread","THREAD_RELATION_TYPE","name","PosthogAnalytics","instance","trackEvent","decorateStartSendingTime","threadId","prom","doMaybeLocalRoomAction","actualRoomId","dis","dispatch","event","CHAT_EFFECTS","forEach","effect","containsEmoji","emojis","command","resp","sendRoundTripMetric","getThread","editContent","newContent","cancelPreviousPendingEdit","createRedactEventDialog","onCloseDialog","response","getRoomId","oldContent","isContentModified","threadRootId"],"mappings":"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","file":"bundles/e983d51f78647cc601c0/35.js","sourceRoot":""}