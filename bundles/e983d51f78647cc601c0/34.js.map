{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/async-components/views/dialogs/security/ImportE2eKeysDialog.tsx","webpack:///./node_modules/matrix-react-sdk/src/utils/MegolmExportEncryption.ts"],"names":["Phase","ImportE2eKeysDialog","React","Component","constructor","props","super","createRef","files","this","file","current","setState","enableSubmit","state","passphrase","length","ev","target","value","onFormChange","preventDefault","startImport","onFinished","phase","Edit","errStr","componentWillUnmount","unmounted","Importing","Promise","resolve","reject","reader","FileReader","onload","e","result","onerror","readAsArrayBuffer","readFileAsArrayBuffer","then","arrayBuffer","MegolmExportEncryption","keys","matrixClient","importRoomKeys","JSON","parse","catch","logger","error","msg","friendlyText","_t","render","disableForm","className","title","onSubmit","onFormSubmit","htmlFor","ref","id","type","autoFocus","onChange","disabled","label","onPassphraseChange","size","onClick","onCancelClick","subtleCrypto","window","crypto","subtle","webkitSubtle","friendlyError","message","cryptoFailMsg","async","decryptMegolmKeyFile","data","password","body","fileStr","TextDecoder","decode","Uint8Array","lineStart","lineEnd","indexOf","Error","line","slice","trim","HEADER_LINE","dataStart","undefined","TRAILER_LINE","dataEnd","base64","latin1String","atob","uint8Array","i","charCodeAt","decodeBase64","unpackMegolmKeyFile","brand","SdkConfig","get","ciphertextLength","salt","subarray","iv","iterations","ciphertext","hmac","aesKey","hmacKey","deriveKeys","toVerify","isValid","plaintext","verify","name","decrypt","counter","encryptMegolmKeyFile","options","kdfRounds","kdf_rounds","getRandomValues","encodedData","TextEncoder","encode","encrypt","cipherArray","bodyLength","resultBuffer","idx","set","toSign","sign","hmacArray","LINE_LENGTH","nLines","Math","ceil","lines","Array","o","encodeBase64","join","buffer","packMegolmKeyFile","start","Date","key","keybits","importKey","deriveBits","hash","now","log","getTime","aesProm","hmacProm","all","String","fromCharCode","apply","from","btoa"],"mappings":"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","file":"bundles/e983d51f78647cc601c0/34.js","sourceRoot":""}